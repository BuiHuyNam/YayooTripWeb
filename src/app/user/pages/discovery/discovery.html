<section class="container mx-auto px-4 py-6">
  <div class="space-y-6">
    <!-- Header -->
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
      <div>
        <h1 class="text-3xl font-bold text-foreground">{{ title }}</h1>
        <p class="text-muted-foreground">{{ subtitle }}</p>
      </div>
      <div class="flex items-center gap-2">
        <button type="button" (click)="setViewMode('list')" class="px-3 py-2 rounded-md text-sm border"
          [ngClass]="viewMode === 'list' ? 'bg-primary text-primary-foreground border-primary' : 'bg-background text-foreground border-muted-foreground/20'">
          Danh sách
        </button>
        <button type="button" (click)="setViewMode('map')" class="px-3 py-2 rounded-md text-sm border"
          [ngClass]="viewMode === 'map' ? 'bg-primary text-primary-foreground border-primary' : 'bg-background text-foreground border-muted-foreground/20'">
          Bản đồ
        </button>
      </div>
    </div>

    <!-- Search & Filters -->
    <div class="rounded-xl border bg-background shadow-sm">
      <div class="p-4">
        <div class="flex flex-col md:flex-row gap-4">
          <!-- Search -->
          <div class="flex-1">
            <div class="relative">
              <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" viewBox="0 0 24 24"
                fill="none" stroke="currentColor">
                <circle cx="11" cy="11" r="8" stroke-width="2"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65" stroke-width="2"></line>
              </svg>
              <input type="text" class="w-full pl-10 pr-3 py-2 rounded-md border bg-background"
                placeholder="Tìm kiếm địa điểm, nhà hàng, khách sạn..." [ngModel]="searchQuery"
                (ngModelChange)="searchQueryChange.emit($event)" />
            </div>
          </div>

          <!-- Category -->
          <div class="w-full md:w-48">
            <select class="w-full px-3 py-2 rounded-md border bg-background" [ngModel]="selectedCategory"
              (ngModelChange)="selectedCategoryChange.emit($event)">
              <option value="all">Loại địa điểm</option>
              <option *ngFor="let c of categories" [value]="c.id">{{ c.name }}</option>
            </select>
          </div>

          <!-- Price Range -->
          <div class="w-full md:w-48">
            <select class="w-full px-3 py-2 rounded-md border bg-background" [ngModel]="selectedPriceRange"
              (ngModelChange)="selectedPriceRangeChange.emit($event)">
              <option value="all">Mức giá</option>
              <option *ngFor="let r of priceRanges" [value]="r.id">{{ r.name }}</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    

    <!-- Results header -->
    <div class="flex items-center justify-between">
      <p class="text-muted-foreground">Tìm thấy {{ resultsCount }} địa điểm</p>

      <!-- <div class="flex flex-wrap gap-2">
      <button *ngIf="selectedCategory !== 'all'" type="button" (click)="clearCategory()"
              class="px-2 py-1 rounded-md text-sm bg-muted hover:bg-muted/80">
        {{ categories.find(c => c.id === selectedCategory)?.name }} <span class="ml-1">×</span>
      </button>

      <button *ngIf="selectedPriceRange !== 'all'" type="button" (click)="clearPrice()"
              class="px-2 py-1 rounded-md text-sm bg-muted hover:bg-muted/80">
        {{ priceRanges.find(r => r.id === selectedPriceRange)?.name }} <span class="ml-1">×</span>
      </button>
    </div> -->
    </div>
  </div>
  <!-- hoặc danh sách -->
  <!-- <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  <app-location-card
    *ngFor="let loc of locations"
    [location]="loc"
    (select)="onSelect(loc)">
  </app-location-card>
</div> -->
  <!-- Danh sách -->
  <div *ngIf="viewMode === 'list'" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-fr">
    <app-location-card *ngFor="let loc of locations" [location]="loc" (select)="onSelect(loc)">
    </app-location-card>
  </div>

  <!-- Bản đồ -->
  <div *ngIf="viewMode === 'map'" class="mt-6">
    <app-location-map [locations]="locations" (locationSelected)="onSelect($event)">
    </app-location-map>
  </div>

</section>
<!-- Modal inline -->
<div *ngIf="isDetailOpen" class="fixed inset-0 z-50">
  <!-- backdrop -->
  <div class="absolute inset-0 bg-black/40" (click)="closeDetail()"></div>

  <!-- panel -->
  <div class="relative z-10 min-h-full flex items-center justify-center p-4">
    <div class="w-full max-w-3xl rounded-2xl bg-background border shadow-lg overflow-hidden"
         role="dialog" aria-modal="true" (click)="$event.stopPropagation()">
      <!-- header -->
      <div class="flex items-center justify-between px-4 py-3 border-b">
        <h3 class="text-lg font-semibold truncate">
          {{ selectedLocation?.name || 'Chi tiết địa điểm' }}
        </h3>
        <button type="button"
                class="h-8 w-8 inline-flex items-center justify-center rounded-md hover:bg-muted"
                (click)="closeDetail()" aria-label="Đóng">✕</button>
      </div>

      <!-- body: dùng lại LocationDetail, không gọi API lại -->
      <div class="p-0">
        <app-location-detail *ngIf="selectedLocation"  [id]="selectedId!" [location]="selectedLocation"></app-location-detail>
      </div>

    
    </div>
  </div>
</div>



<footer class="bg-gray-50 border-t">
  <div class="container mx-auto px-4 py-12">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Brand -->
      <div class="space-y-4">
        <a routerLink="/" class="flex items-center space-x-2">
          <!-- MapPin -->
          <svg class="h-6 w-6 text-primary-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M21 10c0 6-9 13-9 13S3 16 3 10a9 9 0 1 1 18 0Z" />
            <circle cx="12" cy="10" r="3" />
          </svg>
          <span class="font-serif font-bold text-xl text-primary-600">YayooTrip</span>
        </a>
        <p class="text-sm text-gray-500">
          Nền tảng du lịch tự túc hàng đầu Việt Nam, kết nối cộng đồng yêu thích khám phá và trải nghiệm.
        </p>
        <div class="flex space-x-4">
          <a href="#" class="text-gray-500 hover:text-primary-600" aria-label="Facebook">
            <!-- Facebook -->
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M22 12.07C22 6.48 17.52 2 11.93 2S1.86 6.48 1.86 12.07c0 4.98 3.64 9.12 8.4 9.93v-7.03H7.9v-2.9h2.36V9.41c0-2.34 1.39-3.63 3.52-3.63 1.02 0 2.1.18 2.1.18v2.3h-1.18c-1.16 0-1.52.72-1.52 1.45v1.75h2.59l-.41 2.9h-2.18V22c4.76-.81 8.4-4.95 8.4-9.93Z" />
            </svg>
          </a>
          <a href="#" class="text-gray-500 hover:text-primary-600" aria-label="Instagram">
            <!-- Instagram -->
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5.4A4.6 4.6 0 1 0 16.6 12 4.6 4.6 0 0 0 12 7.4Zm6.1-.9a1.1 1.1 0 1 0 1.1 1.1 1.1 1.1 0 0 0-1.1-1.1Z" />
            </svg>
          </a>
          <a href="#" class="text-gray-500 hover:text-primary-600" aria-label="YouTube">
            <!-- YouTube -->
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M23.5 6.2a3 3 0 0 0-2.1-2.1C19.6 3.6 12 3.6 12 3.6s-7.6 0-9.4.5A3 3 0 0 0 .5 6.2 31.1 31.1 0 0 0 0 12a31.1 31.1 0 0 0 .5 5.8 3 3 0 0 0 2.1 2.1c1.8.5 9.4.5 9.4.5s7.6 0 9.4-.5a3 3 0 0 0 2.1-2.1A31.1 31.1 0 0 0 24 12a31.1 31.1 0 0 0-.5-5.8ZM9.6 15.5V8.5l6.2 3.5-6.2 3.5Z" />
            </svg>
          </a>
        </div>
      </div>

      <!-- Links -->
      <div>
        <h3 class="font-semibold text-gray-900 mb-4">Liên kết hữu ích</h3>
        <ul class="space-y-2 text-sm">
          <li><a routerLink="/about" class="text-gray-500 hover:text-primary-600">Giới thiệu về chúng tôi</a>
          </li>
          <li><a routerLink="/destinations" class="text-gray-500 hover:text-primary-600">Lịch trình phổ
              biến</a></li>
          <li><a routerLink="/blog" class="text-gray-500 hover:text-primary-600">Blog du lịch</a></li>
          <li><a routerLink="/community" class="text-gray-500 hover:text-primary-600">Hướng dẫn sử dụng</a>
          </li>
        </ul>
      </div>

      <!-- Support -->
      <div>
        <h3 class="font-semibold text-gray-900 mb-4">Hỗ trợ</h3>
        <ul class="space-y-2 text-sm">
          <li><a routerLink="/help" class="text-gray-500 hover:text-primary-600">Trung tâm trợ giúp</a></li>
          <li><a routerLink="/safety" class="text-gray-500 hover:text-primary-600">Chính sách bảo mật</a></li>
          <li><a routerLink="/terms" class="text-gray-500 hover:text-primary-600">Điều khoản sử dụng</a></li>
          <li><a routerLink="/contact" class="text-gray-500 hover:text-primary-600">Liên hệ</a></li>
        </ul>
      </div>

      <!-- Contact -->
      <div>
        <h3 class="font-semibold text-gray-900 mb-4">Nhận thông tin mới nhất</h3>
        <p class="text-sm text-gray-500 mb-4">
          Đăng ký nhận thông tin về các điểm đến mới và ưu đãi đặc biệt
        </p>
        <div class="space-y-2">
          <div class="flex items-center space-x-2 text-sm text-gray-500">
            <!-- Mail -->
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M4 4h16v16H4z" />
              <path d="m22 6-10 7L2 6" />
            </svg>
            <span>support@yayootrip.com</span>
          </div>
          <div class="flex items-center space-x-2 text-sm text-gray-500">
            <!-- Phone -->
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path
                d="M22 16.92V21a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07A19.5 19.5 0 0 1 3.07 12.81 19.86 19.86 0 0 1 0 4.18 2 2 0 0 1 2 2h4.09a2 2 0 0 1 2 1.72c.12.9.3 1.77.54 2.61a2 2 0 0 1-.45 2.11L7 9a16 16 0 0 0 8 8l.59-1.18a2 2 0 0 1 2.11-.45c.84.24 1.71.42 2.61.54A2 2 0 0 1 22 16.92z" />
            </svg>
            <span>1900 1234</span>
          </div>
        </div>
      </div>
    </div>

    <div class="border-t mt-8 pt-8 text-center text-sm text-gray-500">
      <p>&copy; 2024 YayooTrip - Tất cả quyền được bảo lưu.</p>
    </div>
  </div>
</footer>